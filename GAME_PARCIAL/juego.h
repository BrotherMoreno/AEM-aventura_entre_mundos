#ifndef JUEGO_H
#define JUEGO_H
#include"jugador.h"
#include"enemigos.h"
#include "araña.h"
#include"fantasma.h"
#include"mapas.h"
#include <iostream>
#include<cctype>
#include<Windows.h>
#include<thread>
#include<chrono>
#include<conio.h>

using namespace System;

class Juego {
public:
    Juego() : Jugador(MAX_WIDTH / 2, MAX_HEIGHT - 20) {
        //Enemigos.push_back(new Araña(10, 0, 10));
        Enemigos.push_back(new Fantasma(2, MAX_WIDTH - 13, 10));
        Enemigos.push_back(new Araña(2, 0, 7));
    }
    void gotoxy(int x, int y) {
        Console::SetCursorPosition(x, y);
    }
    void ajustarConsola() {
        HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);
        COORD size = { MAX_WIDTH, MAX_HEIGHT };
        SetConsoleScreenBufferSize(hConsole, size);
        SMALL_RECT rect = { 0, 0, MAX_WIDTH - 1, MAX_HEIGHT - 1 };
        SetConsoleWindowInfo(hConsole, TRUE, &rect);
    }
    void jugarNivel2() {
        int mapa2 [30][120]= {
    {3,3,3,3,3,3,3,6,2,6,4,6,2,6,2,1,1,1,2,5,5,5,2,6,2,6,1,6,2,1,2,6,2,6,1,1,4,6,2,6,4,6,1,1,1,1,1,1,2,6,2,6,5,6,2,5,1,1,1,6,2,6,2,6,2,6,4,6,2,6,4,6,1,1,1,1,1,5,5,5,5,6,6,6,6,6,1,1,1,6,1,1,1,6,6,6,4,6,2,6,4,5,5,5,2,6,5,5,5,6,2,6,2,6,1,1,1,6,7,7},
    {3,3,3,3,3,3,3,2,6,2,4,1,1,1,1,1,8,1,6,5,8,5,5,5,5,2,1,1,1,1,1,1,1,1,1,1,4,2,6,2,4,2,1,8,1,8,1,8,1,2,6,5,5,2,5,5,1,8,1,1,1,1,6,2,6,2,4,2,6,2,4,1,1,1,1,8,1,5,8,5,5,5,5,5,5,6,1,8,1,6,1,8,1,5,5,5,4,2,6,2,4,5,8,5,5,5,5,8,5,1,1,1,1,1,1,8,1,2,7,7},
    {3,3,3,3,3,3,3,6,2,6,4,1,8,1,8,1,8,1,2,5,8,5,5,8,5,6,1,8,8,1,8,8,1,8,8,1,4,6,2,6,4,6,1,8,1,8,1,8,1,6,5,8,5,5,8,5,1,8,1,8,8,1,2,6,2,6,4,6,2,6,4,1,8,8,1,8,1,5,8,5,8,5,8,8,5,6,1,8,1,1,1,8,1,5,8,5,4,6,2,6,4,5,8,5,8,8,5,8,5,1,8,1,8,8,1,8,1,6,2,6},
    {3,3,3,3,3,3,3,2,6,2,4,1,1,1,1,1,1,1,6,5,5,5,5,5,5,2,1,1,1,1,1,1,1,1,1,1,4,2,6,2,4,2,1,1,1,1,1,1,1,2,5,5,5,5,5,5,1,1,1,1,1,1,6,2,6,2,4,2,6,2,4,1,1,1,1,1,1,5,5,5,5,5,5,5,5,6,1,1,1,1,1,1,1,5,5,5,4,2,6,2,4,5,5,5,5,5,5,5,5,1,1,1,1,1,1,1,1,2,6,2},
    {3,3,3,3,3,3,3,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4},
    {6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2},
    {2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6},
    {6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2},
    {4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4},
    {1,1,1,2,6,2,4,2,6,2,4,2,6,2,6,2,6,2,6,2,6,2,6,1,8,8,1,5,5,5,2,6,2,6,2,6,4,2,6,2,4,2,6,1,1,2,6,2,6,2,6,1,1,1,1,1,1,1,6,2,6,2,6,2,6,2,4,2,6,2,4,2,6,1,1,1,1,1,1,1,6,2,6,6,6,6,6,5,5,5,6,6,6,6,7,7,4,2,6,2,4,1,1,1,1,1,1,1,1,2,6,2,6,5,5,5,5,5,2,6},
    {1,8,1,6,2,6,4,6,2,6,4,6,2,6,2,6,2,6,2,6,2,6,2,1,1,1,1,5,8,5,6,2,6,2,6,2,4,6,2,6,4,6,6,1,1,6,2,7,7,6,2,1,8,8,1,8,8,1,2,6,2,6,2,6,2,6,4,6,2,6,4,6,1,8,8,8,1,8,8,1,2,6,5,5,5,5,5,5,8,5,5,5,5,6,7,7,4,6,2,6,4,1,8,1,8,1,8,1,1,1,1,1,2,5,8,5,8,5,5,5},
    {1,1,1,2,6,1,4,2,6,2,4,2,5,5,6,7,7,2,5,2,6,5,6,1,8,8,1,5,5,5,5,5,5,5,5,6,4,2,6,2,4,2,1,1,1,2,6,7,7,2,6,1,8,8,1,8,8,1,6,1,6,2,6,2,6,2,4,2,6,2,4,2,1,1,1,1,1,1,1,1,6,2,5,8,8,5,8,5,8,5,8,8,5,6,6,6,4,2,6,2,4,1,8,1,8,1,8,1,1,8,8,1,6,5,8,5,8,5,8,5},
    {1,8,1,1,1,1,4,6,2,6,4,5,8,8,5,7,7,6,5,5,2,5,5,1,1,1,1,5,8,5,8,8,5,8,5,2,4,6,2,6,4,6,1,8,1,5,5,5,5,5,2,1,1,1,1,1,1,1,2,1,1,6,1,6,2,6,4,6,2,6,4,6,2,6,2,6,2,5,5,5,2,6,5,5,5,5,5,5,5,5,5,5,5,6,6,6,4,6,2,6,4,1,1,1,1,1,1,1,1,1,1,1,2,5,5,5,5,5,5,5},
    {1,1,1,8,8,1,4,2,6,2,4,5,5,5,5,2,1,2,5,5,5,5,5,5,5,6,2,5,8,5,8,8,5,8,5,6,4,2,6,2,4,2,1,8,1,5,8,5,8,5,6,5,6,2,6,2,6,2,6,1,1,1,1,1,1,2,4,2,6,2,4,2,6,2,6,2,6,5,8,5,6,6,6,6,6,6,6,6,6,6,6,6,1,1,1,1,4,2,6,2,4,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2},
    {1,1,1,1,1,1,4,6,2,6,4,5,8,8,5,1,1,1,5,8,8,5,8,8,5,2,6,5,5,5,5,5,5,5,5,2,4,6,2,6,4,6,1,1,1,5,8,5,8,5,5,8,5,6,2,6,2,6,2,1,8,1,8,1,1,1,4,6,2,6,4,6,1,1,1,6,2,5,8,5,5,5,5,6,1,1,1,1,6,6,6,6,1,8,8,1,4,6,2,6,4,6,2,6,2,6,2,6,2,1,1,1,1,6,2,6,2,7,7,6},
    {5,2,6,5,6,2,4,2,6,2,4,5,5,5,5,1,8,1,5,5,5,5,5,5,5,1,1,6,7,7,2,6,1,6,2,6,4,2,6,2,4,2,1,1,1,5,5,5,5,5,5,8,5,2,6,5,5,2,6,1,8,1,8,1,8,1,4,2,6,2,4,2,1,8,1,2,6,5,8,5,5,8,5,6,1,8,8,1,6,7,7,6,1,1,1,1,4,2,6,2,4,5,5,5,6,2,5,5,5,1,8,8,1,2,6,2,6,7,7,2},
    {5,5,5,5,5,5,4,6,2,6,4,5,5,5,5,1,1,1,2,6,2,1,1,1,1,1,1,2,7,7,6,1,8,1,6,2,4,6,2,6,4,6,2,6,2,6,1,1,1,6,5,5,5,5,5,5,5,5,5,1,1,1,1,1,1,1,4,6,2,6,4,6,1,8,1,6,2,5,5,5,5,8,5,6,1,1,1,1,6,7,7,6,1,8,8,1,4,6,2,6,4,5,8,5,2,6,5,8,5,1,1,1,1,1,1,1,1,1,2,6},
    {8,5,8,5,8,5,4,2,6,2,4,1,1,1,1,1,8,1,6,2,6,1,8,8,1,8,1,6,2,6,1,1,1,1,1,6,4,2,6,2,4,2,6,1,1,1,1,8,1,2,5,8,5,5,8,8,5,8,5,2,6,2,6,2,6,2,4,2,6,2,4,2,1,1,1,1,1,1,1,1,5,5,5,6,1,8,8,1,1,1,1,1,1,1,1,1,4,2,6,2,4,5,8,5,5,5,5,8,5,1,8,8,1,8,1,8,8,1,6,2},
    {8,5,8,5,8,5,4,6,2,6,4,1,8,8,1,1,1,1,2,6,2,1,8,8,1,8,1,2,6,2,1,8,1,8,1,2,4,6,2,6,4,6,2,1,8,8,1,8,1,6,5,8,5,5,8,8,5,8,5,6,7,7,2,6,2,6,4,6,2,6,4,6,1,8,1,8,8,1,8,1,5,8,5,6,1,1,1,1,8,1,8,8,1,8,8,1,4,6,2,6,4,5,8,5,8,8,5,8,5,1,1,1,1,8,1,8,8,1,2,6},
    {5,5,5,5,5,5,4,2,6,2,4,1,1,1,1,1,1,1,6,2,6,1,1,1,1,1,1,6,2,6,1,1,1,1,1,6,4,2,6,2,4,2,6,1,1,1,1,1,1,2,5,5,5,5,5,5,5,5,5,2,7,7,6,2,6,2,4,2,6,2,4,2,1,1,1,1,1,1,1,1,5,5,5,6,1,1,1,1,1,1,1,1,1,1,1,1,4,2,6,2,4,5,5,5,5,5,5,5,5,1,1,1,1,1,1,1,1,1,6,2},
    {4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,2,6,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4},
    {6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2},
    {2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6},
    {6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2},
    {2,6,2,6,6,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6},
    {4,4,4,4,4,4,4,2,6,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,6,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,6,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,6,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4},
    {2,6,2,1,1,6,4,6,2,6,4,6,2,6,2,6,5,6,2,6,2,1,1,1,1,1,1,1,2,6,2,6,2,5,5,6,4,6,2,6,4,6,5,6,2,5,2,6,2,6,1,1,2,6,2,5,5,5,5,6,2,1,2,6,2,6,4,6,2,6,4,2,6,2,6,2,6,2,1,1,1,1,1,6,5,5,5,6,5,5,5,6,6,6,6,6,4,6,2,6,4,1,2,6,1,6,2,6,2,6,2,5,5,5,2,5,5,5,6,2},
    {1,1,1,1,1,1,4,2,6,2,4,5,5,5,5,5,5,2,6,2,6,1,8,1,8,1,8,1,6,5,5,5,5,5,5,6,4,2,6,2,4,2,5,5,6,5,5,2,6,2,1,1,1,1,1,5,8,8,5,1,1,1,6,2,6,2,4,2,6,2,4,6,1,1,1,1,1,1,1,8,1,8,1,2,5,8,5,6,5,8,5,5,5,5,5,6,4,2,6,2,4,1,1,1,1,1,1,1,6,2,6,5,8,5,6,5,8,5,2,6},
    {1,8,8,1,8,1,4,6,2,6,4,5,8,5,8,8,5,6,7,7,2,1,8,1,8,1,8,1,2,5,8,8,5,8,5,6,4,6,2,6,4,5,8,8,5,8,8,5,5,6,1,8,1,8,1,5,5,5,5,1,8,1,2,7,7,6,4,6,2,6,4,2,1,8,8,1,8,8,1,8,1,8,1,6,5,8,5,5,5,8,5,8,5,8,5,6,4,6,2,6,4,1,8,1,8,1,8,8,1,6,2,5,8,5,5,5,8,5,6,2},
    {1,1,1,1,1,1,4,2,6,2,4,5,5,5,5,5,5,2,7,7,6,1,1,1,1,1,1,1,6,5,5,5,5,5,5,6,4,2,6,2,4,5,5,5,5,5,5,5,5,2,1,1,1,1,1,5,5,5,5,1,1,1,6,7,7,2,4,2,6,2,4,6,1,1,1,1,1,1,1,1,1,1,1,2,5,5,5,5,5,5,5,5,5,5,5,6,4,2,6,2,4,1,1,1,1,1,1,1,1,2,6,5,5,5,5,5,5,5,2,6}
        };
        ajustarConsola();
        Mapas.dibujarMapa2();

        while (Jugador.estaViva()) {
            Console::BackgroundColor = ConsoleColor::Black;
            Jugador.dibujar(2);
            Jugador.mostrarVida();

            if (_kbhit()) {
                int tecla = _getch();
                Jugador.mover(tecla,2,mapa2);
            }

            for (auto* v : Enemigos) {
                v->mover();

                // 🔧 Colisión más precisa usando longitud
                if (Jugador.getY() == v->getY() &&
                    Jugador.getX() >= v->getX() &&
                    Jugador.getX() < v->getX() + v->getLongitud()) {
                    if (v->chocar()) {
                        Jugador.perderVida();
                    }
                }
            }

            Sleep(100);
        }

        system("cls"); // Limpia pantalla al morir
        gotoxy(MAX_WIDTH / 2 - 10, MAX_HEIGHT / 2);
        std::cout << "¡Game Over! Has muerto.\n";
        Sleep(3000); // Espera antes de cerrar
    }
    void jugarNivel() {
        int mapa1[30][120]= {
                        {7,7,3,3,3,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,7,7,3,3,3,7,7,3,3,3,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7},
                        {7,7,7,3,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,7,7,7,7,3,7,7,7,7,3,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,5,5,5,3,5,5,5,3,5,5,5,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2},
                        {7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,5,4,5,3,5,4,5,3,5,4,5,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2},
                        {7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,5,5,5,3,5,5,5,3,5,5,5,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2},
                        {7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,7,3,3,3,7,3,3,3,7,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2},
                        {7,7,7,3,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,7,7,7,7,3,7,7,7,7,3,7,7,7,7,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,7,2,2,2,2,2},
                        {1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,1,1,3,3,3,1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2},
                        {1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,1,1,3,3,3,1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2},
                        {1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,1,1,3,3,3,1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7},
                        {7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
                        {3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
                        {3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,3,3,3,7,7,3,3,3,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
                        {3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,3,7,7,7,7,3,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,3,3,3,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
                        {3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,3,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
                        {3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
                        {3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,3,3,3,3,3,5,5,5,3,5,5,5,3,5,5,5,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
                        {3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,3,3,3,3,3,5,4,5,3,5,4,5,3,5,4,5,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,3,7,7,7,7,3,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3},
                        {3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,3,3,3,3,3,5,5,5,3,5,5,5,3,5,5,5,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,3,3,3,1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,3,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,3},
                        {3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,3,3,3,3,3,3,7,3,3,3,7,3,3,3,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,3,3,3,1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7},
                        {3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,1,1,7,7,7,1,1,7,7,7,1,1,7,7,3,3,3,3,3,3,3,3,3,3,3,3,1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7},
                        {7,7,3,3,3,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7},
                        {7,7,7,3,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7},
                        {7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,5,5,3,5,5,5,3,5,5,5,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7},
                        {7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,4,5,3,5,4,5,3,5,4,5,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7},
                        {7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,5,5,5,3,5,5,5,3,5,5,5,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7},
                        {7,7,7,3,7,7,7,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,3,3,3,7,3,3,3,7,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,1,1,1,3},
                        {1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,7,7,7,7,7,7,7,7,7,7,7,7,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,1,1,1,3},
                        {1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,1,1,1,3},
                        {1,1,3,3,3,1,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,7,2,2,2,2,2,2,2,2,2,2,7,3,3,3,3,3,3,3,3,3,3,3,1,1,1,3},
                        {7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7}

        };
        ajustarConsola();
        Mapas.dibujarMapa1();
        while (Jugador.estaViva()) {
            Console::BackgroundColor = ConsoleColor::Black;

            Jugador.dibujar(1);
            Jugador.mostrarVida();

            if (_kbhit()) {
                int tecla = _getch();
                Jugador.mover(tecla,1,mapa1);
            }

            for (auto* v : Enemigos) {
                v->mover();

                // 🔧 Colisión más precisa usando longitud
                if (Jugador.getY() == v->getY() &&
                    Jugador.getX() >= v->getX() &&
                    Jugador.getX() < v->getX() + v->getLongitud()) {
                    if (v->chocar()) {
                        Jugador.perderVida();
                    }
                }
            }

            Sleep(50);
        }

        system("cls"); // Limpia pantalla al morir
        gotoxy(MAX_WIDTH / 2 - 10, MAX_HEIGHT / 2);
        std::cout << "¡Game Over! Has muerto.\n";
        Sleep(3000); // Espera antes de cerrar
    }
	~Juego() {
		for (auto* v : Enemigos)
			delete v;
	} 
	void run(); 
private:
	std::vector<Enemigos*> Enemigos;
	Jugador Jugador;
    Mapas Mapas;    
    
	//       
	void intro();
	void ocultarCursor();
	void dibujoDragonEstatico();
	void menuPrincipal();
	void portadaEstaticaJuego();
	void pelotaAni1();
	void pelotaAni2();
	void pelotaAni3();
	void animacionPortada();	
	//void cargarJuego();
	//void nuevoJuego();
	void mostrarInstrucciones();
	void resaltarOpcionMenu(char* options, int pos_opx, int pos_opy, bool seleccion);
};
#endif /
